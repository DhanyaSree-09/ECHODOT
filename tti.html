<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Braille Generator</title>
  <link rel="stylesheet" href="tti.css"/>
</head>
<body>
  <div class="container">
    <h1>Braille Image Generator</h1>
    <input type="text" id="textInput" placeholder="Enter text here..." />
    <button id="generateButton">Generate Braille Image</button>
    <div id="output">
      <canvas id="brailleCanvas"></canvas>
      <a id="downloadLink" style="display:none;" download="braille_output.png">Download Image</a>
    </div>
  </div>

  <script>
    const LETTER_TO_DOTS = {
      'A': [1], 'B': [1, 2], 'C': [1, 4], 'D': [1, 4, 5], 'E': [1, 5],
      'F': [1, 2, 4], 'G': [1, 2, 4, 5], 'H': [1, 2, 5], 'I': [2, 4],
      'J': [2, 4, 5], 'K': [1, 3], 'L': [1, 2, 3], 'M': [1, 3, 4],
      'N': [1, 3, 4, 5], 'O': [1, 3, 5], 'P': [1, 2, 3, 4], 'Q': [1, 2, 3, 4, 5],
      'R': [1, 2, 3, 5], 'S': [2, 3, 4], 'T': [2, 3, 4, 5], 'U': [1, 3, 6],
      'V': [1, 2, 3, 6], 'W': [2, 4, 5, 6], 'X': [1, 3, 4, 6], 'Y': [1, 3, 4, 5, 6],
      'Z': [1, 3, 5, 6], ' ': [], ',': [2], '.': [2, 5, 6]
    };

    const cellWidth = 40;
    const cellHeight = 60;
    const dotRadius = 7;
    const padding = 10;

    const dotPositions = [
      [cellWidth / 4, cellHeight / 6],
      [cellWidth / 4, cellHeight / 2],
      [cellWidth / 4, 5 * cellHeight / 6],
      [3 * cellWidth / 4, cellHeight / 6],
      [3 * cellWidth / 4, cellHeight / 2],
      [3 * cellWidth / 4, 5 * cellHeight / 6]
    ];

    document.getElementById('generateButton').addEventListener('click', () => {
      const text = document.getElementById('textInput').value.toUpperCase();
      const canvas = document.getElementById('brailleCanvas');
      const ctx = canvas.getContext('2d');

      const numChars = text.length;
      const imgWidth = cellWidth * numChars + padding * 2;
      const imgHeight = cellHeight + padding * 2;

      canvas.width = imgWidth;
      canvas.height = imgHeight;

      // Fill background
      ctx.fillStyle = "#fff";
      ctx.fillRect(0, 0, imgWidth, imgHeight);

      ctx.fillStyle = "#000";
      for (let i = 0; i < numChars; i++) {
        const ch = text[i];
        const dots = LETTER_TO_DOTS[ch] || [];
        const xStart = i * cellWidth + padding;

        for (let d = 1; d <= 6; d++) {
          const [dx, dy] = dotPositions[d - 1];
          const cx = xStart + dx;
          const cy = padding + dy;
          if (dots.includes(d)) {
            ctx.beginPath();
            ctx.arc(cx, cy, dotRadius, 0, 2 * Math.PI);
            ctx.fill();
          }
        }
      }

      const link = document.getElementById('downloadLink');
      link.href = canvas.toDataURL("image/png");
      link.style.display = 'inline-block';
      link.textContent = ' Download  Image';
    });
  </script>
</body>
</html>
